/**
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at

 * http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import { Component, Show } from 'solid-js'

import { SymbolInfo, Period } from '../../types'

import i18n from '../../i18n'

export interface PeriodBarProps {
  locale: string
  spread: boolean
  symbol: SymbolInfo
  period: Period
  periods: Period[]
  onMenuClick: () => void
  onSymbolClick: () => void
  onPeriodChange: (period: Period) => void
  onIndicatorClick: () => void
  onTimezoneClick: () => void
  onSettingClick: () => void
  onScreenshotClick: () => void
}

const PeriodBar: Component<PeriodBarProps> = props => {
  return (
    <div
      class="klinecharts-pro-period-bar">
      <div class='menu-container'>
        <svg
          class={props.spread ? '' : 'rotate'}
          viewBox="0 0 1024 1024"
          onClick={props.onMenuClick}>
          <path d="M192.037 287.953h640.124c17.673 0 32-14.327 32-32s-14.327-32-32-32H192.037c-17.673 0-32 14.327-32 32s14.327 32 32 32zM832.161 479.169H438.553c-17.673 0-32 14.327-32 32s14.327 32 32 32h393.608c17.673 0 32-14.327 32-32s-14.327-32-32-32zM832.161 735.802H192.037c-17.673 0-32 14.327-32 32s14.327 32 32 32h640.124c17.673 0 32-14.327 32-32s-14.327-32-32-32zM319.028 351.594l-160 160 160 160z"/>
        </svg>
      </div>
      <Show when={props.symbol}>
        <div
          class="symbol"
          onClick={props.onSymbolClick}>
          <Show when={props.symbol.name}>
            <img alt="symbol" src={props.symbol.logo}/>
          </Show>
         
          <span>{props.symbol.shortName ?? props.symbol.name ?? props.symbol.ticker}</span>
        </div>
      </Show>
      {
        props.periods.map(p => (
          <span
            class={`item period ${p.text === props.period.text ? 'selected' : ''}`}
            onClick={() => { props.onPeriodChange(p) }}>
            {p.text}
          </span>
        ))
      }
      <div
        class='item tools'
        onClick={props.onIndicatorClick}>
        <svg viewBox="0 0 1024 1024">
          <path d="M768 921.6H275.2c-83.2 0-147.2-64-147.2-147.2V275.2C128 192 192 128 275.2 128H768c83.2 0 147.2 64 147.2 147.2 0 25.6-12.8 32-38.4 32s-38.4-12.8-38.4-32c0-38.4-32-70.4-70.4-70.4H275.2c-38.4 0-70.4 32-70.4 70.4v499.2c0 38.4 32 70.4 70.4 70.4H768c38.4 0 70.4-32 70.4-70.4 0-19.2 19.2-38.4 38.4-38.4s38.4 19.2 38.4 38.4c0 76.8-64 147.2-147.2 147.2z m-38.4-281.6c-6.4 0-19.2 0-25.6-6.4L582.4 499.2c-12.8-12.8-12.8-32 0-44.8 12.8-12.8 32-12.8 44.8 0l121.6 134.4c12.8 12.8 12.8 32 0 44.8 0 6.4-6.4 6.4-19.2 6.4z m-140.8 12.8c-6.4 0-12.8 0-19.2-6.4-12.8-12.8-12.8-25.6 0-38.4l166.4-172.8c12.8-12.8 25.6-12.8 38.4 0s12.8 25.6 0 38.4l-166.4 172.8c-6.4 6.4-12.8 6.4-19.2 6.4z m-44.8-377.6c12.8 0 44.8 6.4 44.8 38.4 0 25.6-38.4 19.2-51.2 19.2-57.6 0-76.8 32-83.2 57.6l-12.8 76.8h64c12.8 0 25.6 12.8 25.6 25.6s-12.8 25.6-25.6 25.6H435.2l-44.8 198.4s-6.4 57.6-44.8 57.6-19.2-57.6-19.2-57.6l44.8-192h-57.6c-12.8 0-25.6-12.8-25.6-25.6 0-25.6 12.8-32 25.6-32H384L403.2 384C416 275.2 512 268.8 544 275.2z m326.4 115.2c6.4-19.2 19.2-25.6 38.4-25.6 19.2 6.4 25.6 19.2 25.6 38.4l-64 256c-6.4 19.2-19.2 25.6-38.4 25.6-19.2-6.4-25.6-19.2-25.6-38.4l64-256z" />
        </svg>
        <span>{i18n('indicator', props.locale)}</span>
      </div>
      <div
        class='item tools'
        onClick={props.onTimezoneClick}>
        <svg viewBox="0 0 1024 1024">
          <path d="M860.16 452.096c-9.216-100.352-54.784-193.536-129.536-261.632C655.36 121.856 558.08 83.456 456.192 83.456c-54.784 0-107.52 10.752-157.696 31.744-0.512 0-0.512 0.512-1.024 0.512s-0.512 0.512-1.024 0.512c-47.616 20.48-90.112 49.152-126.976 86.016-37.376 37.376-66.56 80.384-87.04 129.024-20.48 49.664-31.232 102.912-31.232 157.696 0 35.328 4.608 69.632 13.312 102.912 0 1.024 0.512 2.048 1.024 3.072 17.92 65.536 51.712 125.952 100.352 176.128 62.976 64.512 143.872 105.472 231.424 118.272 1.024 0 1.536 0.512 2.56 0.512 14.336 2.048 29.184 3.584 44.032 3.584h9.216c17.408 0 50.688-1.536 78.336-11.264 7.168-2.56 12.8-7.68 15.872-14.336s3.584-14.336 1.024-21.504c-4.096-11.264-14.848-18.944-26.624-18.944-3.072 0-6.656 0.512-9.728 1.536-20.48 7.168-48.128 8.192-59.392 8.192h-4.608c4.608-12.8 6.144-27.136 2.56-41.984-6.656-26.624-28.16-49.152-68.608-71.168l-16.896-9.216c-27.136-14.336-41.984-22.016-50.688-33.792-8.704-11.776-14.848-30.208-22.528-71.168-5.632-27.648-20.48-49.152-44.032-61.44-15.872-8.192-34.816-12.8-57.344-12.8-15.872 0-33.28 2.048-51.712 6.144-9.216 2.048-17.92 4.608-25.6 6.656-3.584-19.456-5.12-39.936-5.12-60.416 0-123.392 64-231.424 160.768-293.888 0.512 11.264 3.072 23.04 8.192 34.304 13.312 28.16 40.448 46.08 80.384 53.76 2.048 0.512 3.584 0.512 5.12 0.512h2.048c3.584 0 16.896 0.512 30.72 5.632 18.944 7.68 29.696 20.48 33.28 40.448 8.704 63.488 18.432 177.664 6.144 214.528-1.024 3.072-1.536 6.144-1.536 9.216 0 15.36 12.8 28.16 28.16 28.16 7.68 0 14.848-3.072 19.968-8.192s120.32-121.856 151.04-160.768c3.584-4.608 7.168-8.704 11.264-13.312 14.848-17.408 30.208-34.816 35.84-60.928 6.656-28.16 0-59.392-19.968-97.792-14.336-27.648-16.896-39.936-17.408-44.544 0.512-0.512 1.536-1.024 2.56-1.536 88.064 56.32 148.992 151.04 159.232 262.656 1.536 14.848 13.312 25.6 28.16 25.6h2.56c15.36-0.512 26.624-13.824 25.6-29.696zM190.464 592.896c12.8 0 23.04 2.048 30.72 6.144 8.192 4.608 12.8 11.264 14.848 22.528 8.704 43.52 16.384 72.704 33.28 94.72 16.384 21.504 37.376 32.256 69.12 49.152l1.024 0.512c4.608 2.56 10.24 5.12 15.36 8.192 32.256 17.408 39.424 29.184 40.96 34.816 1.536 5.632-2.048 13.824-6.656 22.016-123.392-23.552-222.208-111.104-262.144-227.328 18.432-5.12 42.496-10.752 63.488-10.752zM609.28 266.752c27.648 53.248 15.36 67.584-9.216 96.256-4.096 4.608-8.192 9.216-12.288 14.336-15.36 19.456-55.808 61.952-91.136 98.816 0-17.92-1.024-38.4-2.56-60.416-3.584-50.176-9.728-92.672-9.728-94.208v-1.536c-7.68-40.448-31.744-69.632-70.144-83.968-21.504-8.192-41.472-9.216-49.152-9.216C345.088 222.72 332.8 215.04 327.68 204.8c-6.144-12.288-2.048-30.208 2.048-41.472 39.424-15.36 81.92-24.064 126.464-24.064 48.128 0 94.208 9.728 136.192 27.136-3.072 5.632-5.632 12.288-6.656 20.48-2.048 19.968 5.12 44.544 23.552 79.872z" />
          <path d="M715.264 477.696C600.576 477.696 506.88 570.88 506.88 686.08s93.184 208.384 208.384 208.384 208.384-93.184 208.384-208.384-93.696-208.384-208.384-208.384z m0 359.936c-83.456 0-152.064-68.096-152.064-152.064s68.096-152.064 152.064-152.064 152.064 68.096 152.064 152.064-68.608 152.064-152.064 152.064z" />
          <path d="M735.744 693.76v-96.256c0-15.36-12.8-28.16-28.16-28.16s-28.16 12.8-28.16 28.16v108.032c0 7.68 3.072 14.336 8.192 19.968l50.688 51.2c5.12 5.12 12.288 8.192 19.968 8.192s14.336-3.072 19.968-8.192c5.12-5.12 8.192-12.288 8.192-19.968s-3.072-14.848-8.192-19.968l-42.496-43.008z" />
        </svg>
        <span>{i18n('timezone', props.locale)}</span>
      </div>
      <div
        class='item tools'
        onClick={props.onSettingClick}>
        <svg viewBox="0 0 1024 1024">
          <path d="M904.533333 422.4l-85.333333-14.933333-17.066667-38.4 49.066667-70.4c14.933333-21.333333 12.8-49.066667-6.4-68.266667l-53.333333-53.333333c-19.2-19.2-46.933333-21.333333-68.266667-6.4l-70.4 49.066666-38.4-17.066666-14.933333-85.333334c-2.133333-23.466667-23.466667-42.666667-49.066667-42.666666h-74.666667c-25.6 0-46.933333 19.2-53.333333 44.8l-14.933333 85.333333-38.4 17.066667L296.533333 170.666667c-21.333333-14.933333-49.066667-12.8-68.266666 6.4l-53.333334 53.333333c-19.2 19.2-21.333333 46.933333-6.4 68.266667l49.066667 70.4-17.066667 38.4-85.333333 14.933333c-21.333333 4.266667-40.533333 25.6-40.533333 51.2v74.666667c0 25.6 19.2 46.933333 44.8 53.333333l85.333333 14.933333 17.066667 38.4L170.666667 727.466667c-14.933333 21.333333-12.8 49.066667 6.4 68.266666l53.333333 53.333334c19.2 19.2 46.933333 21.333333 68.266667 6.4l70.4-49.066667 38.4 17.066667 14.933333 85.333333c4.266667 25.6 25.6 44.8 53.333333 44.8h74.666667c25.6 0 46.933333-19.2 53.333333-44.8l14.933334-85.333333 38.4-17.066667 70.4 49.066667c21.333333 14.933333 49.066667 12.8 68.266666-6.4l53.333334-53.333334c19.2-19.2 21.333333-46.933333 6.4-68.266666l-49.066667-70.4 17.066667-38.4 85.333333-14.933334c25.6-4.266667 44.8-25.6 44.8-53.333333v-74.666667c-4.266667-27.733333-23.466667-49.066667-49.066667-53.333333z m-19.2 117.333333l-93.866666 17.066667c-10.666667 2.133333-19.2 8.533333-23.466667 19.2l-29.866667 70.4c-4.266667 10.666667-2.133333 21.333333 4.266667 29.866667l53.333333 76.8-40.533333 40.533333-76.8-53.333333c-8.533333-6.4-21.333333-8.533333-29.866667-4.266667L576 768c-10.666667 4.266667-17.066667 12.8-19.2 23.466667l-17.066667 93.866666h-57.6l-17.066666-93.866666c-2.133333-10.666667-8.533333-19.2-19.2-23.466667l-70.4-29.866667c-10.666667-4.266667-21.333333-2.133333-29.866667 4.266667l-76.8 53.333333-40.533333-40.533333 53.333333-76.8c6.4-8.533333 8.533333-21.333333 4.266667-29.866667L256 576c-4.266667-10.666667-12.8-17.066667-23.466667-19.2l-93.866666-17.066667v-57.6l93.866666-17.066666c10.666667-2.133333 19.2-8.533333 23.466667-19.2l29.866667-70.4c4.266667-10.666667 2.133333-21.333333-4.266667-29.866667l-53.333333-76.8 40.533333-40.533333 76.8 53.333333c8.533333 6.4 21.333333 8.533333 29.866667 4.266667L448 256c10.666667-4.266667 17.066667-12.8 19.2-23.466667l17.066667-93.866666h57.6l17.066666 93.866666c2.133333 10.666667 8.533333 19.2 19.2 23.466667l70.4 29.866667c10.666667 4.266667 21.333333 2.133333 29.866667-4.266667l76.8-53.333333 40.533333 40.533333-53.333333 76.8c-6.4 8.533333-8.533333 21.333333-4.266667 29.866667L768 448c4.266667 10.666667 12.8 17.066667 23.466667 19.2l93.866666 17.066667v55.466666z"/>
          <path d="M512 394.666667c-64 0-117.333333 53.333333-117.333333 117.333333s53.333333 117.333333 117.333333 117.333333 117.333333-53.333333 117.333333-117.333333-53.333333-117.333333-117.333333-117.333333z m0 170.666666c-29.866667 0-53.333333-23.466667-53.333333-53.333333s23.466667-53.333333 53.333333-53.333333 53.333333 23.466667 53.333333 53.333333-23.466667 53.333333-53.333333 53.333333z"/>
        </svg>
        <span>{i18n('setting', props.locale)}</span>
      </div>
      <div
        class='item tools'
        onClick={props.onScreenshotClick}>
        <svg viewBox="0 0 1024 1024">
          <path d="M989.884071 853.441363H853.441745v136.442326a34.116311 34.116311 0 0 1-68.221163 0V853.441363h-579.874156a34.116311 34.116311 0 0 1-34.116311-34.116312v-579.874155H34.741949a34.116311 34.116311 0 1 1 0-68.221163h136.442326V34.741567a34.116311 34.116311 0 1 1 68.221163 0v136.442326h579.874155a34.116311 34.116311 0 0 1 34.116312 34.116311v579.874156h136.488166a34.116311 34.116311 0 0 1 0 68.221163z m-204.674949-614.024847H239.416898v545.792224h545.792224z m0 0" />
          <path d="M684.338523 614.386523q-52.131374-102.314555-151.271519-51.501076-27.813332-33.852732-66.570928-100.286141t-71.235134-153.506212q3.965147 83.119116 30.861682 136.373566c26.873615 53.208611 120.490057 209.717333 160.16445 240.727995s128.294292 16.043949 98.051449-71.796672z m-96.538733 19.871577c-34.43719-41.255869-33.715213-54.091028-13.190418-61.287885s41.656967-0.217739 65.230112 23.848184 28.558229 52.349113 13.511297 65.390552-31.136721 13.316478-65.573911-27.950851z m0 0" />
          <path d="M513.092287 537.157829l19.02354 26.243316c-33.669373 53.50657-70.432936 106.165102-91.679709 122.77059-39.662934 31.010661-128.294292 16.043949-98.051448-71.796672q52.165754-102.280175 151.271519-51.478156 9.110671-11.093245 19.413178-25.727618z m20.226836-30.254304q12.72056-19.974716 26.919454-44.304219 38.769057-66.467789 71.223674-153.494752-3.965147 83.119116-30.838762 136.373566c-9.649289 19.080839-27.870631 51.455236-49.117404 86.545645z m-94.40718 127.354575c34.46011-41.255869 33.738133-54.091028 13.213338-61.287885s-41.679887-0.217739-65.253032 23.848184-28.535309 52.349113-13.511297 65.390552 31.136721 13.316478 65.573911-27.950851z m0 0" />
        </svg>
        <span>{i18n('screenshot', props.locale)}</span>
      </div>
    </div>
  )
}

export default PeriodBar
